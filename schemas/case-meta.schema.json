{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://vcsci.org/schemas/case-meta.json",
  "title": "CaseMeta",
  "description": "Metadata schema for a pictogram case in the VCSCI framework",
  "type": "object",
  "required": [
    "case_id",
    "phrase_id",
    "pipeline_version",
    "style_profile_id",
    "generation_timestamp"
  ],
  "properties": {
    "case_id": {
      "type": "string",
      "description": "Unique identifier for this pictogram case",
      "pattern": "^[a-z]{3}-\\d{3}_v\\d+\\.\\d+\\.\\d+_[a-z0-9-]+_\\d{2}$",
      "examples": [
        "req-001_v1.0.0_default-v1_01",
        "rej-003_v1.2.1_simplified-v2_03"
      ]
    },
    "phrase_id": {
      "type": "string",
      "description": "Stable identifier of the source phrase",
      "pattern": "^[a-z]{3}-\\d{3}$",
      "examples": ["req-001", "rej-003", "exp-012"]
    },
    "phrase": {
      "type": "object",
      "description": "The source phrase content",
      "required": ["spanish", "english", "domain"],
      "properties": {
        "spanish": {
          "type": "string",
          "description": "Spanish utterance"
        },
        "english": {
          "type": "string",
          "description": "English equivalent"
        },
        "domain": {
          "type": "string",
          "description": "Contextual domain",
          "enum": [
            "Casa/Hogar",
            "Escuela",
            "Higiene/Salud",
            "Ocio/Comunidad",
            "General"
          ]
        },
        "syntax": {
          "type": "string",
          "description": "Syntactic structure description"
        }
      }
    },
    "pipeline_version": {
      "type": "string",
      "description": "Version of the generative pipeline",
      "pattern": "^v\\d+\\.\\d+\\.\\d+$",
      "examples": ["v1.0.0", "v2.1.3"]
    },
    "style_profile_id": {
      "type": "string",
      "description": "Identifier of the style/prompt configuration",
      "pattern": "^[a-z0-9-]+$",
      "examples": ["default-v1", "simplified-v2", "colorful-v1"]
    },
    "model_name": {
      "type": "string",
      "description": "Name or identifier of the ML model used",
      "examples": ["gpt-4-vision", "stable-diffusion-xl", "dalle-3"]
    },
    "generation_timestamp": {
      "type": "string",
      "description": "ISO 8601 timestamp of generation",
      "format": "date-time",
      "examples": ["2025-01-15T14:30:00Z"]
    },
    "seed": {
      "type": ["integer", "string", "null"],
      "description": "Random seed or variant identifier for reproducibility"
    },
    "variant": {
      "type": "string",
      "description": "Two-digit variant number",
      "pattern": "^\\d{2}$",
      "examples": ["01", "02", "10"]
    },
    "iteration_number": {
      "type": "integer",
      "description": "Iteration/revision number for this phrase_id",
      "minimum": 1,
      "default": 1
    },
    "files": {
      "type": "object",
      "description": "Paths to generated artifacts",
      "properties": {
        "svg": {
          "type": "string",
          "description": "Path to SVG file"
        },
        "preview": {
          "type": "string",
          "description": "Path to preview image (PNG/JPEG)"
        },
        "log": {
          "type": "string",
          "description": "Path to generation log file"
        }
      }
    },
    "generation_params": {
      "type": "object",
      "description": "Additional generation parameters",
      "additionalProperties": true
    },
    "tags": {
      "type": "array",
      "description": "Custom tags for organization",
      "items": {
        "type": "string"
      }
    },
    "notes": {
      "type": "string",
      "description": "Free-form notes about this case"
    }
  },
  "additionalProperties": false
}
